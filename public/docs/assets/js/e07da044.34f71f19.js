"use strict";(globalThis.webpackChunklora_mesh_docs=globalThis.webpackChunklora_mesh_docs||[]).push([[262],{7939:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"troubleshooting/diagnostics","title":"System Diagnostics","description":"Procedures to diagnose problems in each system component.","source":"@site/docs/troubleshooting/diagnostics.md","sourceDirName":"troubleshooting","slug":"/troubleshooting/diagnostics","permalink":"/docs/troubleshooting/diagnostics","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Common Problems","permalink":"/docs/troubleshooting/common-problems"},"next":{"title":"Known Errors","permalink":"/docs/troubleshooting/known-errors"}}');var t=n(4848),r=n(8453);const l={sidebar_position:2},a="System Diagnostics",c={},o=[{value:"Quick Diagnostics",id:"quick-diagnostics",level:2},{value:"General Verification Script",id:"general-verification-script",level:3},{value:"Diagnostics by Component",id:"diagnostics-by-component",level:2},{value:"1. Raspberry Pi 5 (Gateway)",id:"1-raspberry-pi-5-gateway",level:3},{value:"Verify Accessibility",id:"verify-accessibility",level:4},{value:"Verify Services",id:"verify-services",level:4},{value:"Verify LoRa",id:"verify-lora",level:4},{value:"Verify Nodes",id:"verify-nodes",level:4},{value:"2. reComputer R1025-10",id:"2-recomputer-r1025-10",level:3},{value:"Verify Accessibility",id:"verify-accessibility-1",level:4},{value:"Verify Node-RED",id:"verify-node-red",level:4},{value:"Verify WiFi AP",id:"verify-wifi-ap",level:4},{value:"Verify Connectivity",id:"verify-connectivity",level:4},{value:"3. MQTT Broker",id:"3-mqtt-broker",level:3},{value:"Verify Service",id:"verify-service",level:4},{value:"Test Pub/Sub",id:"test-pubsub",level:4},{value:"View Meshtastic Traffic",id:"view-meshtastic-traffic",level:4},{value:"4. LoRa Mesh Network",id:"4-lora-mesh-network",level:3},{value:"Verify from Gateway",id:"verify-from-gateway",level:4},{value:"Send Test Message",id:"send-test-message",level:4},{value:"Verify Configuration",id:"verify-configuration",level:4},{value:"5. Claude Integration",id:"5-claude-integration",level:3},{value:"Test API Directly",id:"test-api-directly",level:4},{value:"Test Complete Flow",id:"test-complete-flow",level:4},{value:"System Logs",id:"system-logs",level:2},{value:"Raspberry Pi",id:"raspberry-pi",level:3},{value:"reComputer",id:"recomputer",level:3},{value:"Diagnostic Table",id:"diagnostic-table",level:2},{value:"Emergency Restart",id:"emergency-restart",level:2},{value:"Restart Everything in Order",id:"restart-everything-in-order",level:3},{value:"Full Restart (last resort)",id:"full-restart-last-resort",level:3}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"system-diagnostics",children:"System Diagnostics"})}),"\n",(0,t.jsx)(s.p,{children:"Procedures to diagnose problems in each system component."}),"\n",(0,t.jsx)(s.h2,{id:"quick-diagnostics",children:"Quick Diagnostics"}),"\n",(0,t.jsx)(s.h3,{id:"general-verification-script",children:"General Verification Script"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'#!/bin/bash\necho "=== LoRa Mesh Network Diagnostics ==="\necho ""\n\necho "1. Verifying Gateway (RPI 5)..."\nping -c 1 192.168.68.127 > /dev/null && echo "   \u2713 Gateway accessible" || echo "   \u2717 Gateway NOT accessible"\n\necho ""\necho "2. Verifying reComputer..."\nping -c 1 192.168.68.130 > /dev/null && echo "   \u2713 reComputer accessible" || echo "   \u2717 reComputer NOT accessible"\n\necho ""\necho "3. Verifying Internet..."\nping -c 1 8.8.8.8 > /dev/null && echo "   \u2713 Internet working" || echo "   \u2717 No internet"\n\necho ""\necho "4. Verifying MQTT..."\ntimeout 2 mosquitto_sub -h 192.168.68.127 -t "test" -C 1 2>/dev/null && echo "   \u2713 MQTT working" || echo "   \u26a0 MQTT no messages (may be normal)"\n\necho ""\necho "=== Diagnostics completed ==="\n'})}),"\n",(0,t.jsx)(s.h2,{id:"diagnostics-by-component",children:"Diagnostics by Component"}),"\n",(0,t.jsx)(s.h3,{id:"1-raspberry-pi-5-gateway",children:"1. Raspberry Pi 5 (Gateway)"}),"\n",(0,t.jsx)(s.h4,{id:"verify-accessibility",children:"Verify Accessibility"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Ping\nping 192.168.68.127\n\n# SSH\nssh pi@192.168.68.127 \"echo 'Connection OK'\"\n"})}),"\n",(0,t.jsx)(s.h4,{id:"verify-services",children:"Verify Services"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# Meshtastic status\nssh pi@192.168.68.127 "sudo systemctl status meshtastic"\n\n# MQTT status\nssh pi@192.168.68.127 "sudo systemctl status mosquitto"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"verify-lora",children:"Verify LoRa"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# View USB devices\nssh pi@192.168.68.127 "lsusb"\n\n# View serial ports\nssh pi@192.168.68.127 "ls -la /dev/ttyUSB* /dev/ttyACM* 2>/dev/null"\n\n# Meshtastic information\nssh pi@192.168.68.127 "meshtastic --info"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"verify-nodes",children:"Verify Nodes"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'ssh pi@192.168.68.127 "meshtastic --nodes"\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"2-recomputer-r1025-10",children:"2. reComputer R1025-10"}),"\n",(0,t.jsx)(s.h4,{id:"verify-accessibility-1",children:"Verify Accessibility"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# External network\nping 192.168.68.130\n\n# Internal network\nping 192.168.100.10\n"})}),"\n",(0,t.jsx)(s.h4,{id:"verify-node-red",children:"Verify Node-RED"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# Service status\nssh recomputer@192.168.68.130 "sudo systemctl status nodered"\n\n# Verify port 1880\nssh recomputer@192.168.68.130 "netstat -tlnp | grep 1880"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"verify-wifi-ap",children:"Verify WiFi AP"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# hostapd status\nssh recomputer@192.168.68.130 "sudo systemctl status hostapd"\n\n# Connected clients\nssh recomputer@192.168.68.130 "cat /var/lib/misc/dnsmasq.leases"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"verify-connectivity",children:"Verify Connectivity"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# Ping to internet\nssh recomputer@192.168.68.130 "ping -c 3 8.8.8.8"\n\n# Ping to Claude API\nssh recomputer@192.168.68.130 "ping -c 3 api.anthropic.com"\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"3-mqtt-broker",children:"3. MQTT Broker"}),"\n",(0,t.jsx)(s.h4,{id:"verify-service",children:"Verify Service"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Status\nsudo systemctl status mosquitto\n\n# Port listening\nnetstat -tlnp | grep 1883\n"})}),"\n",(0,t.jsx)(s.h4,{id:"test-pubsub",children:"Test Pub/Sub"}),"\n",(0,t.jsx)(s.p,{children:"Terminal 1 (subscribe):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'mosquitto_sub -h 192.168.68.127 -t "test/#" -v\n'})}),"\n",(0,t.jsx)(s.p,{children:"Terminal 2 (publish):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'mosquitto_pub -h 192.168.68.127 -t "test/diag" -m "Test $(date)"\n'})}),"\n",(0,t.jsx)(s.p,{children:"Message should appear in Terminal 1."}),"\n",(0,t.jsx)(s.h4,{id:"view-meshtastic-traffic",children:"View Meshtastic Traffic"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'mosquitto_sub -h 192.168.68.127 -t "meshtastic/#" -v\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"4-lora-mesh-network",children:"4. LoRa Mesh Network"}),"\n",(0,t.jsx)(s.h4,{id:"verify-from-gateway",children:"Verify from Gateway"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# View active nodes\nmeshtastic --nodes\n\n# View local node info\nmeshtastic --info\n\n# Listen for messages\nmeshtastic --listen\n"})}),"\n",(0,t.jsx)(s.h4,{id:"send-test-message",children:"Send Test Message"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'meshtastic --sendtext "Diagnostic test $(date +%H:%M)"\n'})}),"\n",(0,t.jsx)(s.h4,{id:"verify-configuration",children:"Verify Configuration"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"meshtastic --get lora\nmeshtastic --get device\nmeshtastic --ch-index 0 --info\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h3,{id:"5-claude-integration",children:"5. Claude Integration"}),"\n",(0,t.jsx)(s.h4,{id:"test-api-directly",children:"Test API Directly"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -X POST https://api.anthropic.com/v1/messages \\\n  -H "x-api-key: YOUR_API_KEY" \\\n  -H "anthropic-version: 2023-06-01" \\\n  -H "content-type: application/json" \\\n  -d \'{\n    "model": "claude-sonnet-4-20250514",\n    "max_tokens": 100,\n    "messages": [{"role": "user", "content": "Say hello"}]\n  }\'\n'})}),"\n",(0,t.jsx)(s.p,{children:"Expected response: JSON with Claude response."}),"\n",(0,t.jsx)(s.h4,{id:"test-complete-flow",children:"Test Complete Flow"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Send simulated MQTT message:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'mosquitto_pub -h 192.168.68.127 \\\n  -t "meshtastic/2/json/LongFast/!69d01ebc" \\\n  -m \'{"payload":{"text":"@claude test"},"sender":"!test"}\'\n'})}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsx)(s.li,{children:"View response in Node-RED debug"}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"system-logs",children:"System Logs"}),"\n",(0,t.jsx)(s.h3,{id:"raspberry-pi",children:"Raspberry Pi"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Meshtastic logs\njournalctl -u meshtastic -n 100\n\n# Mosquitto logs\nsudo tail -100 /var/log/mosquitto/mosquitto.log\n\n# System logs\ndmesg | tail -50\n"})}),"\n",(0,t.jsx)(s.h3,{id:"recomputer",children:"reComputer"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# Node-RED logs\njournalctl -u nodered -n 100\n\n# hostapd logs\njournalctl -u hostapd -n 50\n\n# dnsmasq logs\njournalctl -u dnsmasq -n 50\n"})}),"\n",(0,t.jsx)(s.h2,{id:"diagnostic-table",children:"Diagnostic Table"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Symptom"}),(0,t.jsx)(s.th,{children:"Check"}),(0,t.jsx)(s.th,{children:"Command"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No connection to gateway"}),(0,t.jsx)(s.td,{children:"Ping RPI"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"ping 192.168.68.127"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No MQTT"}),(0,t.jsx)(s.td,{children:"mosquitto service"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"systemctl status mosquitto"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No nodes in mesh"}),(0,t.jsx)(s.td,{children:"Meshtastic"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"meshtastic --nodes"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No Claude response"}),(0,t.jsx)(s.td,{children:"Internet"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"ping api.anthropic.com"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"No internal WiFi"}),(0,t.jsx)(s.td,{children:"hostapd"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"systemctl status hostapd"})})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Node-RED down"}),(0,t.jsx)(s.td,{children:"Service"}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"systemctl status nodered"})})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"emergency-restart",children:"Emergency Restart"}),"\n",(0,t.jsx)(s.h3,{id:"restart-everything-in-order",children:"Restart Everything in Order"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# 1. Restart MQTT\nssh pi@192.168.68.127 "sudo systemctl restart mosquitto"\n\n# 2. Restart Meshtastic\nssh pi@192.168.68.127 "sudo systemctl restart meshtastic"\n\n# 3. Restart Node-RED\nssh recomputer@192.168.68.130 "sudo systemctl restart nodered"\n\n# 4. Restart WiFi AP\nssh recomputer@192.168.68.130 "sudo systemctl restart hostapd dnsmasq"\n'})}),"\n",(0,t.jsx)(s.h3,{id:"full-restart-last-resort",children:"Full Restart (last resort)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# Restart Raspberry Pi\nssh pi@192.168.68.127 "sudo reboot"\n\n# Wait 2 minutes, then restart reComputer\nssh recomputer@192.168.68.130 "sudo reboot"\n'})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var i=n(6540);const t={},r=i.createContext(t);function l(e){const s=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);